<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Dashboard</title>

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');
      
      * {
        font-family: 'Poppins', sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1e1e2e 0%, #2d1b4e 50%, #1a1a2e 100%);
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: '';
        position: fixed;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(138, 43, 226, 0.15) 1px, transparent 1px);
        background-size: 50px 50px;
        animation: moveBackground 20s linear infinite;
        pointer-events: none;
      }

      @keyframes moveBackground {
        0% { transform: translate(0, 0); }
        100% { transform: translate(50px, 50px); }
      }

      @keyframes heartbeat {
        0%, 100% { transform: scale(1); }
        25% { transform: scale(1.1); }
        50% { transform: scale(1); }
      }

      .favorite-btn:hover {
        animation: heartbeat 0.6s ease-in-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in-up {
        animation: fadeInUp 0.5s ease-out;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(5deg); }
      }

      .weather-icon {
        font-size: clamp(3rem, 6vw, 8rem);
        animation: float 4s ease-in-out infinite;
      }

      .glass-card {
        background: rgba(30, 30, 46, 0.7);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(138, 43, 226, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      }

      .neon-glow {
        box-shadow: 0 0 20px rgba(138, 43, 226, 0.4),
                    0 0 40px rgba(138, 43, 226, 0.2),
                    inset 0 0 20px rgba(138, 43, 226, 0.1);
      }

      .metric-card {
        position: relative;
        overflow: hidden;
      }

      .metric-card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
        transform: rotate(45deg);
        transition: all 0.5s;
      }

      .metric-card:hover::before {
        left: 100%;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .slide-in {
        animation: slideIn 0.6s ease-out;
      }

      .search-container {
        position: relative;
      }

      .search-container::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, #fff, transparent);
        transition: width 0.3s;
      }

      .search-container:focus-within::after {
        width: 100%;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .loading-dot {
        animation: pulse 1.5s ease-in-out infinite;
      }

      .forecast-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .forecast-card:hover {
        transform: translateY(-10px) scale(1.05);
      }

      .temp-display {
        font-size: clamp(3.5rem, 8vw, 8rem);
        line-height: 1;
        font-weight: 900;
        background: linear-gradient(180deg, #fff 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 10px 30px rgba(167, 139, 250, 0.5);
        filter: drop-shadow(0 0 30px rgba(167, 139, 250, 0.3));
      }

      @media (max-width: 640px) {
        .glass-card {
          padding: 1rem !important;
        }
        
        .metric-card {
          padding: 0.75rem !important;
        }
      }

      .circle-progress {
        transform: rotate(-90deg);
      }

      .weather-bg-sunny {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .weather-bg-cloudy {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      .weather-bg-rainy {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      }

      .dark .glass-card {
        background: rgba(10, 10, 20, 0.8);
        border: 1px solid rgba(138, 43, 226, 0.2);
      }
    </style>
  </head>

  <body class="min-h-screen text-white transition-colors duration-500 p-4 md:p-8">
    <div class="max-w-7xl mx-auto relative z-10">
      
      <!-- FLOATING HEADER -->
      <div class="glass-card rounded-2xl md:rounded-3xl p-4 md:p-6 lg:p-8 mb-6 md:mb-8 slide-in">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 md:gap-6">
          <div class="flex items-center gap-3 md:gap-4">
            <div class="w-12 h-12 md:w-16 md:h-16 bg-white/20 rounded-xl md:rounded-2xl flex items-center justify-center text-3xl md:text-4xl neon-glow">
              üå§Ô∏è
            </div>
            <div>
              <h1 class="text-2xl md:text-3xl lg:text-5xl font-black">WeatherDash</h1>
              <p class="text-xs md:text-sm text-white/70"></p>
            </div>
          </div>

          <div class="flex gap-2 md:gap-3 w-full md:w-auto justify-center">
            <button
              onclick="refreshWeather()"
              class="flex-1 md:flex-none w-auto h-10 md:h-12 px-3 md:w-12 bg-purple-600/80 hover:bg-purple-500 rounded-lg md:rounded-xl flex items-center justify-center transition-all hover:scale-110 neon-glow"
              title="Refresh"
            >
              <span class="material-symbols-outlined text-lg md:text-2xl">refresh</span>
            </button>

            <button
              onclick="toggleUnit()"
              class="flex-1 md:flex-none px-4 md:px-6 h-10 md:h-12 bg-purple-600/80 hover:bg-purple-500 rounded-lg md:rounded-xl flex items-center justify-center transition-all hover:scale-110 font-bold text-sm md:text-base neon-glow whitespace-nowrap"
            >
              ¬∞C / ¬∞F
            </button>

            <button
              onclick="toggleTheme()"
              class="flex-1 md:flex-none w-auto h-10 md:h-12 px-3 md:w-12 bg-purple-600/80 hover:bg-purple-500 rounded-lg md:rounded-xl flex items-center justify-center transition-all hover:scale-110 neon-glow"
              title="Toggle Theme"
            >
              <span class="material-symbols-outlined text-lg md:text-2xl">dark_mode</span>
            </button>
          </div>
        </div>
      </div>

      <!-- SEARCH BAR WITH FAVORITES -->
      <div class="glass-card rounded-2xl md:rounded-3xl p-4 md:p-6 lg:p-8 mb-6 md:mb-8 fade-in-up">
        <div class="search-container mb-4 md:mb-6">
          <div class="relative">
            <span class="material-symbols-outlined absolute left-3 md:left-4 top-1/2 -translate-y-1/2 text-xl md:text-2xl text-white/60">search</span>
            <input
              id="cityInput"
              class="w-full pl-12 md:pl-14 pr-24 md:pr-32 py-3 md:py-4 bg-gray-900/60 border-2 border-purple-500/30 rounded-xl md:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-purple-500/60 transition-all text-base md:text-lg backdrop-blur-xl"
              placeholder="Search for a city..."
              onkeyup="handleSearch(event)"
              onkeypress="handleEnterKey(event)"
            />
            <button
              onclick="searchWeather()"
              class="absolute right-2 top-1/2 -translate-y-1/2 px-3 md:px-6 py-2 md:py-2.5 bg-purple-600/90 hover:bg-purple-500 rounded-lg md:rounded-xl font-bold transition-all hover:scale-105 neon-glow text-sm md:text-base"
            >
              <span class="hidden sm:inline">Search</span>
              <span class="sm:hidden material-symbols-outlined text-lg">search</span>
            </button>
          </div>
          
          <div
            id="autocompleteResults"
            class="hidden absolute z-50 w-full mt-2 bg-gray-900/95 backdrop-blur-2xl border border-purple-500/40 rounded-xl md:rounded-2xl max-h-60 overflow-y-auto shadow-2xl"
          ></div>
        </div>

        <div class="flex items-center justify-between mb-3 md:mb-4">
          <h3 class="text-lg md:text-xl font-bold flex items-center gap-2">
            <span class="text-xl md:text-2xl">‚≠ê</span> 
            <span class="hidden sm:inline">Favorites</span>
            <span class="sm:hidden">Fav</span>
          </h3>
          <button
            onclick="addCurrentToFavorite()"
            class="favorite-btn text-2xl md:text-3xl hover:scale-125 transition-all"
            title="Add to favorites"
          >
            ‚≠ê
          </button>
        </div>

        <div id="favoriteCities" class="flex flex-wrap gap-2 md:gap-3"></div>
        <div
          id="noFavorites"
          class="text-center py-3 md:py-4 text-white/60 italic text-sm md:text-base"
        >
          No favorites yet. Add your first city! ‚≠ê
        </div>
      </div>

      <!-- LOADING -->
      <div id="loadingIndicator" class="hidden text-center py-12 md:py-20">
        <div class="inline-flex gap-2 md:gap-3 mb-3 md:mb-4">
          <div class="w-3 h-3 md:w-4 md:h-4 bg-white rounded-full loading-dot"></div>
          <div class="w-3 h-3 md:w-4 md:h-4 bg-white rounded-full loading-dot" style="animation-delay: 0.2s"></div>
          <div class="w-3 h-3 md:w-4 md:h-4 bg-white rounded-full loading-dot" style="animation-delay: 0.4s"></div>
        </div>
        <p class="text-lg md:text-xl font-semibold">Fetching weather data...</p>
      </div>

      <!-- ERROR -->
      <div
        id="errorMessage"
        class="hidden glass-card rounded-2xl md:rounded-3xl p-4 md:p-6 mb-6 md:mb-8 border-2 border-red-400/50 fade-in-up"
      >
        <div class="flex items-center gap-3 md:gap-4">
          <div class="w-10 h-10 md:w-12 md:h-12 bg-red-500 rounded-full flex items-center justify-center text-xl md:text-2xl font-bold flex-shrink-0">‚úï</div>
          <p class="text-base md:text-lg font-semibold break-words" id="errorText">City not found</p>
        </div>
      </div>

      <!-- MAIN DASHBOARD -->
      <div id="weatherDashboard" class="hidden">
        
        <!-- CURRENT WEATHER - HERO SECTION -->
        <div class="glass-card rounded-2xl md:rounded-3xl p-4 md:p-8 lg:p-12 mb-6 md:mb-8 fade-in-up overflow-hidden relative">
          <div class="absolute top-0 right-0 w-64 h-64 md:w-96 md:h-96 bg-purple-500/10 rounded-full blur-3xl"></div>
          
          <div class="relative z-10">
            <div class="flex items-center gap-2 mb-4 md:mb-6">
              <span class="material-symbols-outlined text-2xl md:text-3xl">location_on</span>
              <h2 id="locationInfo" class="text-xl md:text-2xl lg:text-3xl font-bold truncate">--</h2>
            </div>

            <div class="grid md:grid-cols-2 gap-6 md:gap-8 items-center">
              <!-- Temperature Display -->
              <div class="text-center md:text-left">
                <div class="flex flex-col sm:flex-row items-center justify-center md:justify-start gap-4 md:gap-6">
                  <div class="temp-display" id="currentTempValue">--¬∞</div>
                  <div id="currentEmoji" class="weather-icon"></div>
                </div>
                <h3 id="weatherCondition" class="text-2xl md:text-3xl lg:text-4xl font-bold mt-3 md:mt-4 mb-2">--</h3>
                <p class="text-white/70 text-sm md:text-base">Feels like <span id="feelsLike" class="text-xl md:text-2xl font-bold text-white">--¬∞</span></p>
                <p id="lastUpdate" class="text-xs md:text-sm text-white/50 mt-3 md:mt-4">Last updated: --</p>
              </div>

              <!-- Quick Stats -->
              <div class="grid grid-cols-2 gap-3 md:gap-4">
                <div class="glass-card rounded-xl md:rounded-2xl p-3 md:p-4 text-center metric-card">
                  <div class="text-3xl md:text-4xl mb-1 md:mb-2">üíß</div>
                  <div id="humidity" class="text-2xl md:text-3xl font-bold">--%</div>
                  <div class="text-xs md:text-sm text-white/70">Humidity</div>
                </div>
                <div class="glass-card rounded-xl md:rounded-2xl p-3 md:p-4 text-center metric-card">
                  <div class="text-3xl md:text-4xl mb-1 md:mb-2">üí®</div>
                  <div id="windSpeed" class="text-2xl md:text-3xl font-bold break-words">--</div>
                  <div class="text-xs md:text-sm text-white/70">Wind</div>
                </div>
                <div class="glass-card rounded-xl md:rounded-2xl p-3 md:p-4 text-center metric-card">
                  <div class="text-3xl md:text-4xl mb-1 md:mb-2">üëÅÔ∏è</div>
                  <div id="visibility" class="text-2xl md:text-3xl font-bold">--</div>
                  <div class="text-xs md:text-sm text-white/70">Visibility</div>
                </div>
                <div class="glass-card rounded-xl md:rounded-2xl p-3 md:p-4 text-center metric-card">
                  <div class="text-3xl md:text-4xl mb-1 md:mb-2">üå°Ô∏è</div>
                  <div id="pressure" class="text-2xl md:text-3xl font-bold">--</div>
                  <div class="text-xs md:text-sm text-white/70">Pressure</div>
                </div>
              </div>
            </div>

            <!-- Additional Metrics -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4 mt-6 md:mt-8">
              <div class="glass-card rounded-xl md:rounded-2xl p-4 md:p-6 flex items-center gap-3 md:gap-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-white/20 rounded-lg md:rounded-xl flex items-center justify-center text-xl md:text-2xl flex-shrink-0">üß≠</div>
                <div class="min-w-0">
                  <div class="text-xs md:text-sm text-white/70">Wind Direction</div>
                  <div id="windDir" class="text-xl md:text-2xl font-bold">--</div>
                </div>
              </div>
              <div class="glass-card rounded-xl md:rounded-2xl p-4 md:p-6 flex items-center gap-3 md:gap-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-white/20 rounded-lg md:rounded-xl flex items-center justify-center text-xl md:text-2xl flex-shrink-0">‚òÅÔ∏è</div>
                <div class="min-w-0">
                  <div class="text-xs md:text-sm text-white/70">Cloud Cover</div>
                  <div id="cloudCover" class="text-xl md:text-2xl font-bold">--%</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 5-DAY FORECAST -->
        <div class="glass-card rounded-2xl md:rounded-3xl p-4 md:p-8 fade-in-up">
          <h3 class="text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center gap-2 md:gap-3">
            <span class="material-symbols-outlined text-2xl md:text-3xl">calendar_month</span>
            <span class="hidden sm:inline">5-Day Forecast</span>
            <span class="sm:hidden">Forecast</span>
          </h3>

          <div id="forecastGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 md:gap-4"></div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>